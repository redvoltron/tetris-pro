[gd_scene load_steps=7 format=3 uid="uid://gi7as04tvli7"]

[ext_resource type="Script" path="res://Scripts/Speen.cs" id="1_e1y0t"]
[ext_resource type="Script" path="res://Scripts/Playfield.cs" id="1_yuxfu"]
[ext_resource type="TileSet" uid="uid://bylu3qdl5tv4f" path="res://Tilesets/default.tres" id="2_31qic"]

[sub_resource type="ViewportTexture" id="ViewportTexture_c4r8f"]
viewport_path = NodePath("Player/PlayerMesh/InputFix/SubViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_sk17q"]
resource_local_to_scene = true
transparency = 1
shading_mode = 0
albedo_texture = SubResource("ViewportTexture_c4r8f")
texture_filter = 0

[sub_resource type="QuadMesh" id="QuadMesh_b7sji"]
resource_local_to_scene = true
material = SubResource("StandardMaterial3D_sk17q")
size = Vector2(4, 3)

[node name="Game" type="Node3D"]

[node name="Player" type="Node" parent="."]

[node name="PlayerMesh" type="MeshInstance3D" parent="Player"]
mesh = SubResource("QuadMesh_b7sji")
skeleton = NodePath("../..")
script = ExtResource("1_e1y0t")

[node name="InputFix" type="SubViewportContainer" parent="Player/PlayerMesh"]
modulate = Color(1, 1, 1, 0)
offset_right = 40.0
offset_bottom = 40.0

[node name="SubViewport" type="SubViewport" parent="Player/PlayerMesh/InputFix"]
process_mode = 3
disable_3d = true
transparent_bg = true
handle_input_locally = false
size = Vector2i(320, 240)
render_target_update_mode = 4

[node name="Playfield" type="Node2D" parent="Player/PlayerMesh/InputFix/SubViewport"]
process_mode = 3
z_index = 3
texture_filter = 1
position = Vector2(160, 120)
script = ExtResource("1_yuxfu")

[node name="Playfield" type="TileMapLayer" parent="Player/PlayerMesh/InputFix/SubViewport/Playfield"]
visible = false
texture_filter = 1
position = Vector2(-40, -240)
tile_set = ExtResource("2_31qic")
y_sort_origin = -1

[node name="Camera2D" type="Camera2D" parent="Player/PlayerMesh/InputFix/SubViewport/Playfield"]
enabled = false
zoom = Vector2(3, 3)
editor_draw_limits = true

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.5)
current = true
fov = 90.0
